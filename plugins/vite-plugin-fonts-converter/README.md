# vite-plugin-fonts-converter

TTF → WOFF2 конвертер с генерацией SCSS.

## Возможности

- Конвертация TTF в WOFF2
- Генерация `@font-face` в SCSS
- Кэширование (конвертация только изменённых файлов)
- HMR в dev режиме
- Работа через алиасы Vite

## Использование

```js
// vite.config.js
import fontsConverter from './plugins/vite-plugin-fonts-converter/index.js';

export default defineConfig({
  resolve: {
    alias: {
      '@fonts/raw': path.resolve(__dirname, 'src/raw/fonts'),
      '@fonts': path.resolve(__dirname, 'src/assets/fonts'),
      '@scss': path.resolve(__dirname, 'src/scss'),
    },
  },
  plugins: [
    fontsConverter({
      sourceDir: '@fonts/raw',
      outputDir: '@fonts',
      scss: {
        output: '@scss/base/_fonts.scss',
      },
    }),
  ],
});
```

## Опции

| Опция | Тип | По умолчанию | Описание |
|-------|-----|--------------|----------|
| `sourceDir` | `string` | — | Алиас к TTF файлам (обязательно) |
| `outputDir` | `string` | — | Алиас к выходной директории (обязательно) |
| `allowedWeights` | `number[]` | `[400, 500, 600, 700]` | Разрешённые font-weight |
| `allowedStyles` | `string[]` | `['normal']` | Разрешённые font-style |
| `watch` | `boolean` | `true` | Отслеживать изменения в dev |
| `reloadOnChange` | `boolean` | `true` | HMR при изменениях |
| `debug` | `boolean` | `false` | Debug логи |
| `scss.output` | `string` | — | Алиас к SCSS файлу (обязательно) |
| `scss.urlAlias` | `string` | `outputDir` | Алиас для URL в `@font-face` |

## Генерируемый SCSS

```scss
// Auto-generated by vite-plugin-fonts-converter
// Do not edit manually

@font-face {
  font-family: 'Manrope';
  src: url('@fonts/Manrope-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

// SCSS variables
$font-manrope: 'Manrope', sans-serif;
```

## Структура

```
raw/fonts/           ← sourceDir (TTF)
  Manrope-Regular.ttf
  Manrope-Bold.ttf

src/assets/fonts/    ← outputDir (WOFF2)
  Manrope-Regular.woff2
  Manrope-Bold.woff2
  .fonts-cache.json

src/scss/base/
  _fonts.scss        ← scss.output
```

## Именование файлов

Плагин парсит имя TTF файла по паттерну `Family-Weight.ttf`:

| Файл | Результат |
|------|-----------|
| `Manrope-Regular.ttf` | family: Manrope, weight: 400 |
| `Manrope-Bold.ttf` | family: Manrope, weight: 700 |
| `Manrope-SemiBold.ttf` | family: Manrope, weight: 600 |
| `Inter-Italic.ttf` | family: Inter, style: italic |
